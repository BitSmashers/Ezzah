<dom-module id="media-result" attributes="elem">
  <style>
    :host {
      display: block;
    }
    img {
      float:left;
      width: 150px;
    }
  </style>
  <template>
    <paper-item>
      <img src="{{elem.artist}}" />
      <div>
        <h3>{{elem.title}}</h3>
        <ul>
          <template is="dom-repeat" items="{{elem.tracks}}">
          <li>{{item.id}}
              <a href="#" on-click="playVideo" data-vid$="{{item.id}}">{{item.title}}</a>
            </li>
          </template>
        </ul>
      </div>
    </paper-item>
  </template>

  <script>
    (function () {
      Polymer({
        is: 'media-result',
        properties: {
          elem: {
            type: Object,
            observer: 'elemChanged'
          }
        },
        elemChanged: function(i, e) {
          //console.log(i, e)
        },
        ready: function() {
        },
        playVideo: function(evt) {
          var vid_id = evt.target.dataset.vid
            console.log(evt.target.attributes)
            console.log(evt.target.dataset)
          var that = this
          pegasus("/youtube/"+vid_id).then(function(data) {
            that.fire('iron-signal', {name: 'playyoutubevideo', data: data.id});
          })
        }
      });
    })();
  </script>

</dom-module>
